<h1 [translate]="'permissionGroup.header'"></h1>

<div class="adding-section">
    <button [appHasPermission]="'PERMISSION_GROUP_CREATE'" md-raised-button id="new-permissionGroup-button" type="button" (click)="openDialog()">
        {{'add'|translate}}
    </button>
</div>

<table cellpadding="10" cellspacing="0">
    <tr>
        <th [translate]="'permissionGroup.name'"></th>
        <th colspan="2" [translate]="'th.actions'"></th>
    </tr>
    <tr *ngFor="let permissionGroup of permissionGroups; let i = index">
        <td>{{permissionGroup.name}}</td>
        <td>
            <button [appHasPermission]="'PERMISSION_GROUP_UPDATE'" id="edit-{{permissionGroup.id}}" class="edit-button" (click)="edit(permissionGroup)" md-mini-fab
                    md-tooltip="{{'edit'|translate}}" mdTooltipPosition="above">
                <i class="material-icons">mode_edit</i>
            </button>
        </td>
        <td>
            <button [appHasPermission]="'PERMISSION_GROUP_DELETE'" id="remove-{{permissionGroup.id}}" class="remove-button" (click)="remove(i)" md-mini-fab md-mini-fab
                    md-tooltip="{{'remove'|translate}}" mdTooltipPosition="above">
                <i class="material-icons">delete</i>
            </button>
        </td>
    </tr>
</table>

<ng-template #dialog>
  <form #permissionGroupForm="ngForm" novalidate>
    <div class="form-control">
      <md-input-container>
        <input id="name-input" name="name" [(ngModel)]="permissionGroup.name" #name="ngModel" required type="text"
               mdInput
               placeholder="{{'permissionGroup.name'|translate}}">
        <md-hint>
          <small [hidden]="name.valid || (name.pristine && !permissionGroupForm.submitted)" [translate]="'permissionGroup.name.required'"></small>
        </md-hint>
      </md-input-container>
    </div>

    <div class="form-control">
      <angular2-multiselect [settings]="multiSelectSettings"
                            [ngModelOptions]="{standalone: true}"
                            [data]="options"
                            [(ngModel)]="selectedOptions"
                            (onSelect)="onItemSelect($event)"
                            (onDeSelect)="onItemDeSelect($event)"
                            (onSelectAll)="onSelectAll($event)"
                            (onDeSelectAll)="onDeSelectAll($event)">
      </angular2-multiselect>
    </div>

    <button id="save-button" type="submit" md-raised-button (click)="save(permissionGroupForm.valid)">{{'save'|translate}}</button>
  </form>
</ng-template>
