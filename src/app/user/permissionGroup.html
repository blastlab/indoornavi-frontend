<h1 [translate]="'permissionGroup.header'"></h1>
<p-toolbar>
  <div class="ui-toolbar-group-left">
      <button pButton class="ui-button-secondary"
              id="add-permission"
        [appHasPermission]="'PERMISSION_GROUP_CREATE'"
        (click)="openDialog()"
        label="{{'add'|translate}}"
        icon="fa fa-plus" iconPos="left"
      ></button>
  </div>
</p-toolbar>

<table cellpadding="10" cellspacing="0">
    <tr>
        <th [translate]="'permissionGroup.name'"></th>
        <th colspan="2" [translate]="'th.actions'"></th>
    </tr>
    <tr *ngFor="let permissionGroup of permissionGroups; let i = index">
        <td>{{permissionGroup.name}}</td>
        <td>
            <button pButton class="ui-button-warning"
                    id="edit-permission"
                    [appHasPermission]="'PERMISSION_GROUP_UPDATE'"
                    (click)="edit(permissionGroup)"
                    title="{{'edit'|translate}}"
                    icon="fa fa-pencil-square" iconPos="left"
            ></button>
        </td>
        <td>
            <button pButton class="ui-button-danger"
                    id="remove-permission"
                    [appHasPermission]="'PERMISSION_GROUP_DELETE'"
                    (click)="remove(i)"
                    title="{{'remove'|translate}}"
                    icon="fa fa-trash" iconPos="left"
            ></button>
        </td>
    </tr>
</table>

<ng-template #dialog>
  <form #permissionGroupForm="ngForm" novalidate>
    <div class="form-control">
      <md-input-container>
        <input id="name-input" name="name" [(ngModel)]="permissionGroup.name" #name="ngModel" required type="text"
               mdInput
               placeholder="{{'permissionGroup.name'|translate}}">
        <md-hint>
          <small [hidden]="name.valid || (name.pristine && !permissionGroupForm.submitted)" [translate]="'permissionGroup.name.required'"></small>
        </md-hint>
      </md-input-container>
    </div>

    <div class="form-control">
      <angular2-multiselect [settings]="multiSelectSettings"
                            [ngModelOptions]="{standalone: true}"
                            [data]="options"
                            [(ngModel)]="selectedOptions"
                            (onSelect)="onItemSelect($event)"
                            (onDeSelect)="onItemDeSelect($event)"
                            (onSelectAll)="onSelectAll($event)"
                            (onDeSelectAll)="onDeSelectAll($event)">
      </angular2-multiselect>
    </div>

    <button pButton class="ui-button-success"
            id="save-permission"
            (click)="save(permissionGroupForm.valid)"
            label="{{'save'|translate}}"
            icon="fa fa-floppy-o" iconPos="left"
    ></button>
  </form>
</ng-template>
