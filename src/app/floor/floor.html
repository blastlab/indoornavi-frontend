<p-toolbar>
  <div class="ui-toolbar-group-left">
    <button pButton class="ui-button-secondary"
            id="add-floor"
            [appHasPermission]="'FLOOR_CREATE'"
            (click)="openDialog()"
            label="{{'add'|translate}}"
            icon="fa fa-plus" iconPos="left"
    ></button>
  </div>
</p-toolbar>

<p-dataTable [loading]="loading" [value]="building.floors" styleClass="auto">
  <p-column field="level" header="{{'floor.level'|translate}}"></p-column>
  <p-column field="name" header="{{'floor.name'|translate}}"></p-column>
  <p-column header="{{'th.actions'|translate}}" styleClass="col-button">
    <ng-template let-floor="rowData" let-i="rowIndex" pTemplate="body">
      <button
        pTooltip="{{'go.to.map'|translate}}" mdTooltipPosition="above" type="button" pButton (click)="goTo(floor)" icon="fa-level-down">
      </button>
      <button
        [appHasPermission]="'FLOOR_UPDATE'"
        pTooltip="{{'edit'|translate}}" mdTooltipPosition="above" type="button" pButton (click)="openDialog(floor)" icon="fa-edit">
      </button>
      <button
        [appHasPermission]="'FLOOR_DELETE'"
        pTooltip="{{'remove'|translate}}" mdTooltipPosition="above" type="button" pButton (click)="remove(i)" icon="fa-trash">
      </button>
    </ng-template>
  </p-column>
</p-dataTable>

<p-dialog header="{{'floor.details'}}" [draggable]="false" [(visible)]="displayDialog" [responsive]="true" showEffect="fade" [modal]="true"
          [contentStyle]="{ overflow: 'visible' }"
          [width]="800"
          dismissableMask="true">
  <form #floorForm novalidate>
    <div class="ui-g" *ngIf="floor">
      <div class="ui-g-offset-12 ui-md-offset-4 ui-lg-offset-4 ui-g-12 ui-md-2 ui-lg-2">
        <label for="name">{{'floor.name'|translate}}</label>
      </div>
      <div class="ui-g-12 ui-md-6 ui-lg-6">
        <input name="name" [appAutoFocus]="displayDialog" pInputText id="name" [(ngModel)]="floor.name" #nameInput="ngModel"/>
      </div>
      <div class="ui-g-offset-12 ui-md-offset-4 ui-lg-offset-4 ui-g-12 ui-md-2 ui-lg-2">
        <label for="level">{{'floor.level'|translate}}</label>
      </div>
      <div class="ui-g-12 ui-md-6 ui-lg-6">
        <input name="level" type="number" pInputText id="level" [(ngModel)]="floor.level" #levelInput="ngModel"/>
      </div>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa-close" (click)="cancel()" label="{{'cancel'|translate}}"></button>
        <button type="submit" pButton icon="fa-check" (click)="save(true)" label="{{'save'|translate}}"></button>
      </div>
    </p-footer>
  </form>
</p-dialog>

<p-confirmDialog icon="fa fa-question-circle" width="425"></p-confirmDialog>
